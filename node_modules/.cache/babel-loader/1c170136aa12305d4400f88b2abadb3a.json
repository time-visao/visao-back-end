{"ast":null,"code":"import _regeneratorRuntime from \"/home/lorensov/projects/hub/visao/visao-rappel/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/lorensov/projects/hub/visao/visao-rappel/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/lorensov/projects/hub/visao/visao-rappel/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/lorensov/projects/hub/visao/visao-rappel/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/lorensov/projects/hub/visao/visao-rappel/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/lorensov/projects/hub/visao/visao-rappel/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/lorensov/projects/hub/visao/visao-rappel/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/lorensov/projects/hub/visao/visao-rappel/src/components/PrivateRoute/index.js\";\nimport React, { Component } from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { getAuthUserRequest } from '../../actions/LoginAction';\nimport Loading from '../Loading';\n\nvar PrivateRoute =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PrivateRoute, _Component);\n\n  function PrivateRoute() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, PrivateRoute);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(PrivateRoute)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      loading: true\n    };\n    return _this;\n  }\n\n  _createClass(PrivateRoute, [{\n    key: \"componentDidMount\",\n    // async componentWillMount() {\n    //   console.log('!!!!');\n    //   await this.props.getAuthUserRequest();\n    // }\n    value: function () {\n      var _componentDidMount = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.props.getAuthUserRequest();\n\n              case 2:\n                this.setState({\n                  loading: false\n                });\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function componentDidMount() {\n        return _componentDidMount.apply(this, arguments);\n      }\n\n      return componentDidMount;\n    }() // componentWillReceiveProps(nextProps) {\n    //   if (this.props.login.loading && !nextProps.login.loading) {\n    //     this.setState({ loading: false });\n    //   }\n    // }\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var RenderComponent = this.props.component;\n      var login = this.props.login;\n      return this.state.loading ? React.createElement(Loading, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 34\n        },\n        __self: this\n      }) : React.createElement(Route, {\n        render: function render(props) {\n          return login.response ? React.createElement(RenderComponent, Object.assign({}, props, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 36\n            },\n            __self: this\n          })) : React.createElement(Redirect, {\n            to: \"/login\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 36\n            },\n            __self: this\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 36\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return PrivateRoute;\n}(Component); //   <Redirect to=\"/login\"/>\n\n\nvar mapState = function mapState(state) {\n  return {\n    login: state.login\n  };\n};\n\nvar mapActions = function mapActions(dispatch) {\n  return bindActionCreators({\n    getAuthUserRequest: getAuthUserRequest\n  }, dispatch);\n};\n\nexport default connect(mapState, mapActions)(PrivateRoute);","map":{"version":3,"sources":["/home/lorensov/projects/hub/visao/visao-rappel/src/components/PrivateRoute/index.js"],"names":["React","Component","Route","Redirect","connect","bindActionCreators","getAuthUserRequest","Loading","PrivateRoute","state","loading","props","setState","RenderComponent","component","login","response","mapState","mapActions","dispatch"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,KAAT,EAAgBC,QAAhB,QAAgC,kBAAhC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,kBAAT,QAAmC,OAAnC;AACA,SAASC,kBAAT,QAAmC,2BAAnC;AACA,OAAOC,OAAP,MAAoB,YAApB;;IAEMC,Y;;;;;;;;;;;;;;;;;UACJC,K,GAAQ;AACNC,MAAAA,OAAO,EAAE;AADH,K;;;;;;AAIR;AACA;AACA;AACA;;;;;;;;;;uBAGQ,KAAKC,KAAL,CAAWL,kBAAX,E;;;AACN,qBAAKM,QAAL,CAAc;AAAEF,kBAAAA,OAAO,EAAE;AAAX,iBAAd;;;;;;;;;;;;;;;QAGF;AACA;AACA;AACA;AACA;;;;6BAES;AACP,UAAMG,eAAe,GAAG,KAAKF,KAAL,CAAWG,SAAnC;AACA,UAAMC,KAAK,GAAG,KAAKJ,KAAL,CAAWI,KAAzB;AAEA,aAAO,KAAKN,KAAL,CAAWC,OAAX,GACL,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADK,GAGL,oBAAC,KAAD;AAAO,QAAA,MAAM,EAAE,gBAAAC,KAAK;AAAA,iBAAKI,KAAK,CAACC,QAAN,GAAiB,oBAAC,eAAD,oBAAqBL,KAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAjB,GAAkD,oBAAC,QAAD;AAAU,YAAA,EAAE,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAvD;AAAA,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHF;AAKD;;;;EA9BwBV,S,GAgC3B;;;AACA,IAAMgB,QAAQ,GAAG,SAAXA,QAAW,CAAAR,KAAK;AAAA,SAAK;AACzBM,IAAAA,KAAK,EAAEN,KAAK,CAACM;AADY,GAAL;AAAA,CAAtB;;AAIA,IAAMG,UAAU,GAAG,SAAbA,UAAa,CAAAC,QAAQ;AAAA,SAAId,kBAAkB,CAAC;AAAEC,IAAAA,kBAAkB,EAAlBA;AAAF,GAAD,EAAyBa,QAAzB,CAAtB;AAAA,CAA3B;;AAEA,eAAef,OAAO,CACpBa,QADoB,EAEpBC,UAFoB,CAAP,CAGbV,YAHa,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport { getAuthUserRequest } from '../../actions/LoginAction';\nimport Loading from '../Loading';\n\nclass PrivateRoute extends Component {\n  state = {\n    loading: true,\n  };\n\n  // async componentWillMount() {\n  //   console.log('!!!!');\n  //   await this.props.getAuthUserRequest();\n  // }\n\n  async componentDidMount() {\n    await this.props.getAuthUserRequest();\n    this.setState({ loading: false });\n  }\n\n  // componentWillReceiveProps(nextProps) {\n  //   if (this.props.login.loading && !nextProps.login.loading) {\n  //     this.setState({ loading: false });\n  //   }\n  // }\n\n  render() {\n    const RenderComponent = this.props.component;\n    const login = this.props.login;\n\n    return this.state.loading ? (\n      <Loading />\n    ) : (\n      <Route render={props => (login.response ? <RenderComponent {...props} /> : <Redirect to=\"/login\" />)} />\n    );\n  }\n}\n//   <Redirect to=\"/login\"/>\nconst mapState = state => ({\n  login: state.login,\n});\n\nconst mapActions = dispatch => bindActionCreators({ getAuthUserRequest }, dispatch);\n\nexport default connect(\n  mapState,\n  mapActions,\n)(PrivateRoute);\n"]},"metadata":{},"sourceType":"module"}